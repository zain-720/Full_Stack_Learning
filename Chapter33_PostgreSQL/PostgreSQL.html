<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
    crossorigin="anonymous">
    <link
        rel="stylesheet" 
        href="style33.css"
    />
    <title>Chapter33</title>
</head>
<body>
    
    <h1>Chapter 33: PostgresSQL </h1>
    <hr />

    <h2>33.0 : Intro to Postgres</h2>

    <p><br/>Need to import postgres moudule from npm (npm i pg) (import pg from "pg"). Next we connect using
        the configuration details required using pg.Client().
    </p>
    <br/>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 164845.png" alt="Cool Photo" width="300" height="190" />
    <p>We give username, host for the database, name of the database, password to access the database, 
        and port number the database runs on.
    </p>
    <br/>

    <p>Afterwards we connect using .connect(). (db.connect)</p>
    <br/>

    <p>Once we are connect we can start interacting with the database using db. for example, we can use 
        (db.query()) to send SQL coode based requests to our database
    </p>
    <br/>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 170029.png" alt="Cool Photo" width="320" height="190" />
    <p>db.end() closes the database connection.</p>
    <br/>

    <p>We will be using a locally hosted Postgres server so we dont have to pay.</p>
    <br/>

    
    <br />
    <hr />
    <h2>33.1 : Postgres TABLEs types & keywords</h2>

    <p>Creating tables in Postgres: keywords, primary keys, and data types</p>
    <br/>

    <p>Create table for our PostgresSQL the same way we did regular SQL</p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 172651.png" alt="Cool Photo" width="200" height="140" />

    <p>SERIAL just auto increments the id key so we dont need to add an id each time we input into the table.</p>

    
    <br />
    <hr />
    <h2>33.2 : Using pgAdmin </h2>

    <p>Pratice creating databases and tables inside pgAdmin</p>
    <br/>

    <p>Given our csv (comma seperated values) files, lets input them into our database</p>
    <br/>

    <p>So lets now write some SQL code in pgAdmin to create a table in our database.</p>
    <br/>

    <p>In pdAdmin4 go to our servers and create a new database (naming it world this time) owner
        is still the default user postgres. Once done we save it.
    </p>
    <br/>

    <p>If we expand schemas, and then tables we at first see no tables, now to make tables</p>
    <br/>

    <p>Adding a table to the database : Click on the query tool button, this is where we can write SQL code. 
        now we create a table fro the data in capitals.csv  
    </p>
    <img src="./Screenshot 2024-11-03 174433.png" alt="Cool Photo" width="400" height="140" />
    

    <p><br/> Click the execute button to run this, and now you've added the table to your database.</p>
    <br/>

    <p>How to import data into table : Now to import the csv files into our table. In pgAdmin, right click on the table 
        then click on import/export data, then select the file and format of csv, turn header on in options to tell that the first line
        of the import is not data but is a header for each of the fields, this will then auto import that header to be the columns.
        Click "ok" now the data has been imported to the table.</p>
    <br/>

    <p>We can now use this filled out database for our game.</p>
    
    <br />
    <hr />
    <h2>33.3 : READ data from a Postgres database</h2>

    <p>Use the SQL commands we learned in chapter 32 to do all of these</p>
    <br/>

    <p>RECALL to read : SELECT * FROM table_name <br/>
    now we need to impliment this in our node and express backend so our .js will read from the SQL database.</p>
    <br/>

    <p>RECALL from 33.0 : We connect to the data base, then send it an SQL code based request, that will send back data.
        In our case password is 72050h
    </p>
    <img src="./Screenshot 2024-11-03 164845.png" alt="Cool Photo" width="300" height="190" />
    <br/>
    <img src="./Screenshot 2024-11-03 170029.png" alt="Cool Photo" width="300" height="190" />
    <p>Using this we get a list of data where at each index there is id, name, flag, which is used to make the game.
        check folder 8.2 solution.js to see how this all works.
    </p>
    

    <br />
    <hr />
    <h2>33.4 : Querying Data </h2>

    <p>How to use SELECT, WHERE, and LIKE in PostgreSQL</p>
    <br/>

    <p>Going to be using items in folder 8.3, just has a cvs file, create a new table in world for it</p>
    <br/>

    <p>We can get specific selects by using WHERE just like we did in SQL, and input them just as we did when we 
        did db.query("SELECT * FROM flags") by adding it in the SQL code section.
    </p>
    <br/>

    <p>There is also an extra key word we can put after WHERE called LIKE (WHERE column LIKE pattern)
        ex (WHERE country LIKE 'United' || '%') so where its like United at the start of the string
    </p>
    <br/>

    


    <br />
    <hr />
    <h2>33.5 : UNIQUE and NOT NULL </h2>

    <p>Putting everythign we know about databases together for this mini project in folder 8.3 called Travel Tracker</p>
    <br/>

    <p>Already know how UNIQUE and NOT NULL works from SQL learning in chapter 32</p>
    <br/>

    <p>This section covers soltuion.js which is just getting data from the database and converting a ejs array to a js array.</p>
    <br/>
    <p>This is how it would look to request specific data</p>
    <img src="./Screenshot 2024-11-03 202437.png" alt="Cool Photo" width="390" height="270" />

    
    <br />
    <hr />
    <h2>33.6 : INSERT and add DATA </h2>

    <p>Continuation of Travel Tracker, now we look at soltuion2.js which adds a POST request from the .ejs 
        which sends a INSERT SQL order to the data base to add a country to the list, all is available in solution2.js.
    </p>
    <br/>

    <p>We already know how INSERT INTO, VALUES works from chapter 32. Can see how to do it in .js by looking at solution2.js</p>
    <br/>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 202712.png" alt="Cool Photo" width="390" height="270" />
    <p>$1 is a placeholder for a value the user will give for input which is put beside it, ex here its 
        [countrycode], and above we tell it to look for country name [input]. <br/>
        res.redirect("/") redirects to the homepage so a new .render will run will new info
    </p>

    
    <br />
    <hr />
    <h2>33.7 : Travel Tracker part 3 </h2>
    <p>Solution3,4 are just improvements and edge cases added into the program.</p>


    <br />
    <hr />
    <h2>33.7 : Travel Tracker part 3 </h2>
    <p>Solution3,4 are just improvements and edge cases added into the program.</p>


    <br />
    <hr />
    <h2>33.8 : One-to-One Relationships </h2>
    <p>How to use foreign keys and inner joins in one-to-one relationships (Work in folder 8.5).</p>
    <br/>

    <p>Working with SQL databases with relationships. (in folder 8.5 queries.sql relationships are given)</p>
    <br/>
    
    <p>Recall</p>
    <img src="./Screenshot 2024-11-03 205052.png" alt="Cool Photo" width="390" height="270" />
    
    <p>In this id in contact_detail is linked one to one with id in student </p>
    <br/>

    <p>Now when we create rows for each they will be linked at EX : id1</p>
    <img src="./Screenshot 2024-11-03 205835.png" alt="Cool Photo" width="320" height="100" />
    
    <p>Now with this link at id we can return every table relating to a student using SELECT and JOIN </p>
    <br/>
    <p>RECALL</p>
    <img src="./Screenshot 2024-11-03 210143.png" alt="Cool Photo" width="320" height="100" />
    <p>Inner joining contact_detail table to student table ON the crietria student.id = contact_detail.id, 
        this returns the info of both tables in a single row, wherever the equality holds.
    </p>

    <br />
    <hr />
    <h2>33.8 : One-to-Many Relationships </h2>
    <p>Use REFERENCES to link tables in One-to-Many relationships with a foreign key.</p>
    <br/>

    <p>Lets say a student with an ID submits alot of homework under there ID, that creates a one-to-many 
        relationship, since one student can be linked to many pecies of homework, not just one row in a table.
    </p>
    <br/>

    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 211032.png" alt="Cool Photo" width="320" height="100" />
    <p>Student id for our many side would be a foregin key while in our one side, its the primary key. Instead the 
        primary key for homework is its own seperate id. 
    </p>
    <br/>

    <p>Now when we want the student all all of the homework of the student we JOIN on the student_id the homeworks reference</p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 211317.png" alt="Cool Photo" width="320" height="100" />
    <p>Can select specific columns to output to prevent repeated id output instead of * on SELECT.</p>


    <br />
    <hr />
    <h2>33.9 : Many-to-Many Relationships </h2>
    <p>Multiple values are referenced by multiple tables.</p>
    <br/>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 211923.png" alt="Cool Photo" width="320" height="300" />

    <p> 1 student here could be in many classes, and 1 class could have many students. In both directions it can be 
        one to many. In this case we have a many to many relationship. We use a seperate table (Enrollment) to help 
        represent just this relationship </p>
    <br/>

    <p>We can use JOIN on this table in different ways to get ethier of the one-to-many relationships talked about earlier.</p>
    <br/>
    <p>EX : Output of each row is all of the classes for a student with the same ID</p>
    <img src="./Screenshot 2024-11-03 212924.png" alt="Cool Photo" width="320" height="100" />
    <p>We are aliasing student.id to just id to make the output look nicer using AS. dont even need AS ex(enrollment e) aliases to e just fine.</p>

    <p> Gives : </p>
    <img src="./Screenshot 2024-11-03 213529.png" alt="Cool Photo" width="320" height="100" />
    
    <br />
    <hr />
    <h2>33.10 : Family Travel Tracker </h2>
    <p>All of this learning is put together in the family travel tracker (folder 8.5)
        which has code on how to call and use everything in solution.js.</p>

    

    <br />
    <hr />
    <h2>33.11 : How to update and delete data & tables </h2>
    <p>Recall the SQL used to delete that we did in chapter 32.</p>
    <br/>

    <p>ALTER TABLE table_name (something) : used to alter an existing able</p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 214310.png" alt="Cool Photo" width="200" height="60" />
    <p>This will change the table name to "user"</p>
    <br/>
    <p>Or we can do :</p>
    <img src="./Screenshot 2024-11-03 214615.png" alt="Cool Photo" width="300" height="60" />
    <p>This will alter the type of data a column takes</p>
    <br/>

    <p>Many kinds of alterations possible, check documentation to see the others when you need them.
        EX : (ADD email TEXT) would add a new column named email of data type TEXT
    </p>
    <br/>

    <p>DROP TABLE : This will drop a table from our database</p>
    <p>EX : dropping the student database</p>
    <img src="./Screenshot 2024-11-03 215106.png" alt="Cool Photo" width="200" height="30" />
    <p>More functionality can be added to this. EX (DROP TABLE IF EXISTS table_name) would only 
        drop table_name if it existed in your database
    </p>
    <br/>

    <p>UPDATE DATE table_name SET column_to_update = value, ... WHERE condition : to update a certain values in a column in a table, if a condition is met.</p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 215619.png" alt="Cool Photo" width="200" height="100" />
    <p>First student (student with id 1) will have their first name changed to Lebron</p>
    <br/>
    <p>ORDER BY : gvies the ability to retreieve data ordered by some condition</p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 220112.png" alt="Cool Photo" width="200" height="100" />
    <p>In this case we are asking the output to be ordered by id's in accending order. (add ; to the end of ASC, DESC yo order in decending order)</p>
    <br/>

    <p>DELETE data from table : DELETE FROM table_name WHERE condition, is how we deleted some data from a table. 

    </p>
    <p>EX :</p>
    <img src="./Screenshot 2024-11-03 220610.png" alt="Cool Photo" width="300" height="50" />
    <p>Deleting from visted_countries that user with id=1 went to FR</p>

    <br />
    <hr />
    <h2>33.12 : Permalist Project </h2>
    <p>Big project using everything from databases in folder 8.6 for you to review later.</p>

    <br/>
    <hr/>
    <a href="../HTML_Portfolio_Page_Extras/Full_Stack_Index.html"><h2>Return To Index</h2></a>
</body>
</html>